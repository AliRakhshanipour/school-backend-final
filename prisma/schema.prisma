// prisma/schema.prisma

// -----------------------------
// Generator & Datasource
// -----------------------------
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// -----------------------------
// Enums
// -----------------------------

/// Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø³ÛŒØ³ØªÙ…
enum UserRole {
  ADMIN
  TEACHER
  STUDENT
}

/// Ù†ÙˆØ¹ Ù†ÙˆØ¨Øª (ØªØ±Ù…/Ù†ÙˆØ¨Øª Ø¯Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ)
enum TermType {
  FIRST // Ù†ÙˆØ¨Øª Ø§ÙˆÙ„
  SECOND // Ù†ÙˆØ¨Øª Ø¯ÙˆÙ…
}

/// ÙˆØ¶Ø¹ÛŒØª Ø²Ù†Ø¯Ú¯ÛŒ Ù‡Ù†Ø±Ø¬Ùˆ - Ø¨Ø§ Ú†Ù‡ Ú©Ø³ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
enum LivingSituation {
  BOTH_PARENTS // Ø¨Ø§ Ù¾Ø¯Ø± Ùˆ Ù…Ø§Ø¯Ø±
  FATHER_ONLY // ÙÙ‚Ø· Ø¨Ø§ Ù¾Ø¯Ø±
  MOTHER_ONLY // ÙÙ‚Ø· Ø¨Ø§ Ù…Ø§Ø¯Ø±
  GUARDIAN_GRANDPARENTS // Ø¨Ø§ Ù¾Ø¯Ø±Ø¨Ø²Ø±Ú¯/Ù…Ø§Ø¯Ø±Ø¨Ø²Ø±Ú¯
  GUARDIAN_RELATIVE // Ø¨Ø§ ÛŒÚ©ÛŒ Ø§Ø² Ø§Ù‚ÙˆØ§Ù… (Ø¹Ù…ÙˆØŒ Ø¯Ø§ÛŒÛŒØŒ Ø®Ø§Ù„Ù‡ØŒ ...)
  GUARDIAN_OTHER // Ù‚ÛŒÙ… ØºÛŒØ±Ø®ÙˆÛŒØ´Ø§ÙˆÙ†Ø¯
  DORMITORY // Ø®ÙˆØ§Ø¨Ú¯Ø§Ù‡
  OTHER // Ø³Ø§ÛŒØ± Ù…ÙˆØ§Ø±Ø¯
}

/// Ù†ÙˆØ¹ Ù†Ø³Ø¨Øª ÙˆØ§Ù„Ø¯/ÙˆÙ„ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù‡Ù†Ø±Ø¬Ùˆ
enum ParentRelationType {
  FATHER
  MOTHER
  GUARDIAN_OTHER
}

/// Ø³Ø·Ø­ ØªØ­ØµÛŒÙ„Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†/Ø§ÙˆÙ„ÛŒØ§/Ù…Ø¹Ù„Ù…
enum EducationLevel {
  ILLITERATE // Ø¨ÛŒâ€ŒØ³ÙˆØ§Ø¯
  PRIMARY_SCHOOL // Ø§Ø¨ØªØ¯Ø§ÛŒÛŒ
  MIDDLE_SCHOOL // Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ/Ù…ØªÙˆØ³Ø·Ù‡ Ø§ÙˆÙ„
  HIGH_SCHOOL // Ù…ØªÙˆØ³Ø·Ù‡ Ø¯ÙˆÙ… (Ù†Ø§ØªÙ…Ø§Ù…)
  DIPLOMA // Ø¯ÛŒÙ¾Ù„Ù…
  ASSOCIATE_DEGREE // ÙÙˆÙ‚â€ŒØ¯ÛŒÙ¾Ù„Ù…
  BACHELOR // Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ
  MASTER // Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ Ø§Ø±Ø´Ø¯
  DOCTORATE // Ø¯Ú©ØªØ±ÛŒ
  HAWZA // ØªØ­ØµÛŒÙ„Ø§Øª Ø­ÙˆØ²ÙˆÛŒ
  OTHER // Ø³Ø§ÛŒØ±
}

/// ÙˆØ¶Ø¹ÛŒØª Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‡Ù†Ø±Ø¬Ùˆ
enum PreRegistrationStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
  ACCEPTED // Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡
  RESERVED // Ø±Ø²Ø±Ùˆ / Ù„ÛŒØ³Øª Ø§Ù†ØªØ¸Ø§Ø±
}

/// Ø´ÛŒÙØª Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ Ø±Ø´ØªÙ‡ / Ú©Ù„Ø§Ø³
enum ShiftType {
  MORNING
  AFTERNOON
  EVENING
}

/// Ù†ÙˆØ¹ Ù…Ø¯Ø±Ø³Ù‡: ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ÛŒØ§ Ú©Ø§Ø± Ùˆ Ø¯Ø§Ù†Ø´
enum SchoolType {
  TECHNICAL_VOCATIONAL // ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ
  KAR_O_DANESH // Ú©Ø§Ø± Ùˆ Ø¯Ø§Ù†Ø´
}

/// ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø±Ø®ØµÛŒ Ù…Ø¹Ù„Ù…
enum LeaveStatus {
  PENDING // Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ
  APPROVED // ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
  REJECTED // Ø±Ø¯ Ø´Ø¯Ù‡
  CANCELLED // Ù„ØºÙˆ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ù…Ø¹Ù„Ù…
}

/// Ù†ÙˆØ¹ Ù…Ø±Ø®ØµÛŒ
enum LeaveType {
  SICK // Ø§Ø³ØªØ¹Ù„Ø§Ø¬ÛŒ
  PERSONAL // Ø´Ø®ØµÛŒ
  OFFICIAL // Ø§Ø¯Ø§Ø±ÛŒ / Ù…Ø§Ù…ÙˆØ±ÛŒØª
  OTHER // Ø³Ø§ÛŒØ±
}

/// Ø³Ø·Ø­ Ø¯Ø³ØªØ±Ø³ÛŒ/Ù†Ù…Ø§ÛŒØ´ Ø®Ø¨Ø±
enum NewsVisibility {
  PUBLIC // Ù‡Ù…Ù‡ (ØµÙØ­Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ Ø¨Ø¯ÙˆÙ† Ù„Ø§Ú¯ÛŒÙ†)
  LOGGED_IN // Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù„Ø§Ú¯ÛŒÙ†â€ŒØ´Ø¯Ù‡
  STUDENTS // ÙÙ‚Ø· Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
  TEACHERS // ÙÙ‚Ø· Ù…Ø¹Ù„Ù…â€ŒÙ‡Ø§
  ADMINS // ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù†/Ù…Ø¹Ø§ÙˆÙ†ÛŒÙ†
}

/// Ù†ÙˆØ¹ Ø¯Ø±Ø³: ØªØ¦ÙˆØ±ÛŒ ÛŒØ§ Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ
enum CourseType {
  THEORY
  WORKSHOP
}

/// Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡ÙØªÙ‡ (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³ÛŒØ³ØªÙ… Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø§ÛŒØ±Ø§Ù†)
enum Weekday {
  SATURDAY
  SUNDAY
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
}

/// ÙˆØ¶Ø¹ÛŒØª Ø­Ø¶ÙˆØ± Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø± Ø¬Ù„Ø³Ù‡
enum AttendanceStatus {
  PRESENT // Ø­Ø§Ø¶Ø±
  ABSENT // ØºØ§ÛŒØ¨
  EXCUSED // ØºÛŒØ¨Øª Ù…ÙˆØ¬Ù‡
}

enum ExamTerm {
  FIRST // Ù†ÙˆØ¨Øª Ø§ÙˆÙ„
  SECOND // Ù†ÙˆØ¨Øª Ø¯ÙˆÙ…
  SUMMER // (Ø§Ø®ØªÛŒØ§Ø±ÛŒØŒ Ø¨Ø±Ø§ÛŒ ØªØ§Ø¨Ø³ØªØ§Ù†)
}

enum ExamMethod {
  WRITTEN // Ú©ØªØ¨ÛŒ
  ORAL // Ø´ÙØ§Ù‡ÛŒ
  PRACTICAL
}

enum ExamCategory {
  QUIZ // Ø¢Ø²Ù…ÙˆÙ† Ú©Ù„Ø§Ø³ÛŒ / Ú©ÙˆØªØ§Ù‡
  MIDTERM // Ù…ÛŒØ§Ù†â€ŒØªØ±Ù… / Ù…Ø³ØªÙ…Ø±
  FINAL // Ù†Ù‡Ø§ÛŒÛŒ Ù†ÙˆØ¨Øª
  OTHER
}

// -----------------------------
// Core User / Roles
// -----------------------------

model User {
  id       String   @id @default(uuid())
  username String   @unique
  password String
  role     UserRole

  /// Refresh Token Ù‡Ø´ Ø´Ø¯Ù‡ (Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„Ø§Ù‹ Ù„Ø§Ú¯ÛŒÙ† Ø§Ø³Øª)
  hashedRefreshToken    String?
  refreshTokenExpiresAt DateTime?

  decidedLeaveRequests TeacherLeaveRequest[] @relation("LeaveDecidedBy")

  newsPosts NewsPost[] // ğŸ‘ˆ Ø®Ø¨Ø±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ù†ÙˆØ´ØªÙ‡

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  teacher Teacher?
  student Student?
}

// -----------------------------
// Teacher (Ù…Ø¹Ù„Ù…)
// -----------------------------

model Teacher {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  /// Ù†Ø§Ù…
  firstName String

  /// Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
  lastName String

  /// Ù†Ø§Ù… Ù¾Ø¯Ø±
  fatherName String?

  /// Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ (Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯)
  personnelCode String @unique

  /// Ú©Ø¯ Ù…Ù„ÛŒ (Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯)
  nationalId String @unique

  /// Ø´Ù…Ø§Ø±Ù‡ Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
  birthCertificateNumber String?

  /// Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ Ù…Ø¹Ù„Ù… (Ø§Ø² enum EducationLevel)
  educationLevel EducationLevel?

  /// Ø±Ø´ØªÙ‡â€ŒÛŒ ØªØ­ØµÛŒÙ„ÛŒ Ù…Ø¹Ù„Ù… (Ù…Ø«Ù„Ø§Ù‹ "Ø¨Ø±Ù‚ ØµÙ†Ø¹ØªÛŒ")
  majorField String?

  /// Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø± (Ø¨Ù‡ Ø³Ø§Ù„)
  workExperienceYears Int?

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ø³Ú©ÙˆÙ†Øª
  address String?

  /// ØªÙ„ÙÙ† ØªÙ…Ø§Ø³
  phone String?

  /// ØªÙ„ÙÙ† Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
  emergencyPhone String?

  /// Ú©Ø¯ Ù¾Ø³ØªÛŒ
  postalCode String?

  /// Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„ Ø¹Ú©Ø³ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ±
  photoPath String?

  /// Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¹Ú©Ø³
  photoUpdatedAt DateTime?

  /// Ø§Ù†ØªØ³Ø§Ø¨â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø¹Ù„Ù… Ø§ØµÙ„ÛŒ Ø¯Ø§Ø±Ø¯
  mainCourseAssignments CourseAssignment[] @relation("MainTeacherAssignments")

  /// Ø§Ù†ØªØ³Ø§Ø¨â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø¹Ù„Ù… Ú©Ù…Ú©ÛŒ Ø¯Ø§Ø±Ø¯
  assistantCourseAssignments CourseAssignment[] @relation("AssistantTeacherAssignments")

  leaveRequests TeacherLeaveRequest[] // ğŸ‘ˆ Ù…Ø±Ø®ØµÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø¹Ù„Ù…

  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  studentAttendances StudentAttendance[]
  theoryExams        TheoryExam[]
}

// -----------------------------
// Student & Parents (Ù‡Ù†Ø±Ø¬Ùˆ Ùˆ ÙˆØ§Ù„Ø¯ÛŒÙ†)
// -----------------------------

/// Ù‡Ù†Ø±Ø¬Ùˆ (Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù‡Ù†Ø±Ø³ØªØ§Ù†)
model Student {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  /// Ù†Ø§Ù…
  firstName String

  /// Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
  lastName String

  /// Ú©Ø¯ Ù…Ù„ÛŒ (Ù…Ù†Ø­ØµØ±Ø¨Ù‡â€ŒÙØ±Ø¯)
  nationalId String @unique

  /// Ù†Ø§Ù… Ù¾Ø¯Ø±
  fatherName String

  /// Ø¨Ø§ Ú†Ù‡ Ú©Ø³ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (enum)
  livingSituation LivingSituation

  /// Ø³Ø±ÛŒØ§Ù„ Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡ (Ù…Ø«Ù„Ø§Ù‹ "Ø¯ 12/321090")
  birthCertificateSeries String?

  /// ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯ (Ù…ÛŒÙ„Ø§Ø¯ÛŒ â€“ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø¯Ø± Ù„Ø§ÛŒÙ‡ Ø¨Ø§Ù„Ø§ØªØ± Ù‡Ù†Ø¯Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
  birthDate DateTime

  /// Ø¢ÛŒØ§ Ú†Ù¾â€ŒØ¯Ø³Øª Ø§Ø³ØªØŸ
  isLeftHanded Boolean @default(false)

  /// Ù…Ø¹Ù„ÙˆÙ„ÛŒØª Ø¯Ø§Ø±Ø¯ØŸ
  hasDisability Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ù†ÙˆØ¹ Ù…Ø¹Ù„ÙˆÙ„ÛŒØª (Ø§Ú¯Ø± hasDisability = true)
  disabilityDescription String?

  /// Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ø®Ø§Øµ Ø¯Ø§Ø±Ø¯ØŸ
  hasChronicDisease Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ø®Ø§Øµ
  chronicDiseaseDescription String?

  /// Ø¯Ø§Ø±ÙˆÛŒ Ø®Ø§Øµ Ù…ØµØ±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
  hasSpecialMedication Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø±ÙˆÛŒ Ø®Ø§Øµ
  specialMedicationDescription String?

  /// Ù…Ø¹Ø¯Ù„ Ø³Ø§Ù„ Ù‚Ø¨Ù„ (Ø§Ø² 20ØŒ Ø¨Ø§ Ø¯Ùˆ Ø±Ù‚Ù… Ø§Ø¹Ø´Ø§Ø±)
  lastYearAverage Decimal? @db.Decimal(4, 2)

  /// Ù†Ù…Ø±Ù‡ Ø±ÛŒØ§Ø¶ÛŒ Ø³Ø§Ù„ Ù‚Ø¨Ù„
  lastYearMathScore Decimal? @db.Decimal(4, 2)

  /// Ù†Ù…Ø±Ù‡ Ø§Ù†Ø¶Ø¨Ø§Ø· Ø³Ø§Ù„ Ù‚Ø¨Ù„
  lastYearDisciplineScore Decimal? @db.Decimal(4, 2)

  /// Ù…Ù‚Ø·Ø¹/Ù¾Ø§ÛŒÙ‡ ØªØ­ØµÛŒÙ„ÛŒ Ø³Ø§Ù„ Ù‚Ø¨Ù„ (Ù…Ø«Ù„Ø§Ù‹ "Ú©Ù„Ø§Ø³ Ù†Ù‡Ù…")
  lastYearEducationLevel String?

  /// Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolName String?

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolAddress String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolPhone String?

  /// Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„ Ø¹Ú©Ø³ Û³xÛ´ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ±
  photoPath      String?
  photoUpdatedAt DateTime?

  /// Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…â€ŒÙ‡Ø§ Ø¯Ø± Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ ØªØ­ØµÛŒÙ„ÛŒ Ù…Ø®ØªÙ„Ù
  enrollments StudentEnrollment[]

  /// Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø¯Ø±/Ù…Ø§Ø¯Ø±/ÙˆÙ„ÛŒ
  parents Parent[]

  /// Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…ÛŒ Ú©Ù‡ Ù†Ù‡Ø§ÛŒØªØ§Ù‹ Ø¨Ù‡ Ø§ÛŒÙ† Ù‡Ù†Ø±Ø¬Ùˆ Ù…Ù†Ø¬Ø± Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  preRegistrations PreRegistration[] @relation("StudentPreRegistrations")

  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  studentAttendances StudentAttendance[]
  workshopScores     WorkshopScore[]
  theoryExamResults  TheoryExamResult[]
}

/// Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø¯Ø±/Ù…Ø§Ø¯Ø±/ÙˆÙ„ÛŒ (Ø¨Ø¹Ø¯ Ø§Ø² Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‚Ø·Ø¹ÛŒ)
model Parent {
  id String @id @default(uuid())

  /// Ù‡Ù†Ø±Ø¬ÙˆÛŒÛŒ Ú©Ù‡ Ø§ÛŒÙ† ÙˆØ§Ù„Ø¯/ÙˆÙ„ÛŒ Ø¨Ù‡ Ø§Ùˆ Ù…Ø±Ø¨ÙˆØ· Ø§Ø³Øª
  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  /// Ù†Ø³Ø¨Øª (Ù¾Ø¯Ø±ØŒ Ù…Ø§Ø¯Ø±ØŒ Ø³Ø§ÛŒØ± Ø§ÙˆÙ„ÛŒØ§)
  relation ParentRelationType

  /// Ù†Ø§Ù…
  firstName String

  /// Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
  lastName String

  /// Ú©Ø¯ Ù…Ù„ÛŒ (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯)
  nationalId String?

  /// Ø´Ù…Ø§Ø±Ù‡ Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡
  birthCertificateNumber String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ù…ÙˆØ¨Ø§ÛŒÙ„)
  mobilePhone String?

  /// Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ (enum)
  educationLevel EducationLevel?

  /// Ø´ØºÙ„
  jobTitle String?

  /// Ù…Ø­Ù„ ØªÙˆÙ„Ø¯
  birthPlace String?

  /// Ù…Ø­Ù„ ØµØ¯ÙˆØ± Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡
  idCardIssuePlace String?

  /// Ø¯Ø± Ù‚ÛŒØ¯ Ø­ÛŒØ§Øª Ø§Ø³ØªØŸ
  isAlive Boolean @default(true)

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ø³Ú©ÙˆÙ†Øª
  homeAddress String?

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ú©Ø§Ø±
  workAddress String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø­Ù„ Ú©Ø§Ø±
  workPhone String?

  /// ÙˆØ¶Ø¹ÛŒØª Ø§ÛŒØ«Ø§Ø±Ú¯Ø±ÛŒ / Ø­Ø¶ÙˆØ± Ø¯Ø± Ø¬Ù†Ú¯
  hasWarParticipation Boolean @default(false)

  /// Ø¯Ø±ØµØ¯ Ø¬Ø§Ù†Ø¨Ø§Ø²ÛŒ (Û° ØªØ§ Û±Û°Û°)
  veteranPercent Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([studentId])
}

// -----------------------------
// Academic Structure (Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒØŒ Ù†ÙˆØ¨ØªØŒ Ø±Ø´ØªÙ‡ØŒ Ù¾Ø§ÛŒÙ‡ØŒ Ú©Ù„Ø§Ø³)
// -----------------------------

/// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ (Ù…Ø«Ù„Ø§Ù‹ 1403-1404)
model AcademicYear {
  id        Int      @id @default(autoincrement())
  label     String   @unique // Ù…Ø«Ù„Ø§Ù‹ "1403-1404"
  startDate DateTime
  endDate   DateTime

  terms            Term[]
  classGroups      ClassGroup[]
  enrollments      StudentEnrollment[]
  preRegistrations PreRegistration[]

  teacherLeaveRequests  TeacherLeaveRequest[] // ğŸ‘ˆ Ù…Ø±Ø®ØµÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ
  preRegistrationWindow PreRegistrationWindow? // ğŸ‘ˆ Ø¨Ø§Ø²Ù‡ Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§ÛŒÙ† Ø³Ø§Ù„

  courseSessions CourseSession[]

  createdAt           DateTime             @default(now())
  updatedAt           DateTime             @updatedAt
  courseAssignments   CourseAssignment[]
  weeklyScheduleSlots WeeklyScheduleSlot[]
  theoryExams         TheoryExam[]
}

/// Ù†ÙˆØ¨Øª (ØªØ±Ù…) Ø¯Ø± ÛŒÚ© Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ (Ù†ÙˆØ¨Øª Ø§ÙˆÙ„/Ø¯ÙˆÙ…)
model Term {
  id             Int          @id @default(autoincrement())
  type           TermType
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])
  startDate      DateTime
  endDate        DateTime

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([academicYearId, type])
}

/// Ø±Ø´ØªÙ‡ ØªØ­ØµÛŒÙ„ÛŒ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø±Ù‚ ØµÙ†Ø¹ØªÛŒ Ø´ÛŒÙØª ØµØ¨Ø­ / Ø¹ØµØ±ØŒ Ø¨Ø±Ø§ÛŒ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ ÛŒØ§ Ú©Ø§Ø± Ùˆ Ø¯Ø§Ù†Ø´)
model FieldOfStudy {
  id Int @id @default(autoincrement())

  /// Ù†Ø§Ù… Ø±Ø´ØªÙ‡ (Ù…Ø«Ù„Ø§Ù‹ "Ø¨Ø±Ù‚ ØµÙ†Ø¹ØªÛŒ")
  name String

  /// Ù†ÙˆØ¹ Ù…Ø¯Ø±Ø³Ù‡ (ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ / Ú©Ø§Ø± Ùˆ Ø¯Ø§Ù†Ø´)
  schoolType SchoolType

  /// Ø´ÛŒÙØª Ø±Ø´ØªÙ‡ (ØµØ¨Ø­ / Ø¹ØµØ± / ...)
  shift ShiftType

  /// ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø±Ø´ØªÙ‡
  isActive Boolean @default(true)

  /// Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ø±Ø´ØªÙ‡
  classGroups ClassGroup[]

  /// Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ø±Ø´ØªÙ‡ Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯
  requestedPreRegistrations PreRegistration[] @relation("RequestedFieldOfStudy")

  /// Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù†Ù‡Ø§ÛŒØªØ§Ù‹ Ø¯Ø± Ø§ÛŒÙ† Ø±Ø´ØªÙ‡ Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
  admittedPreRegistrations PreRegistration[] @relation("AdmittedFieldOfStudy")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  courses   Course[]

  /// Ù‡Ø± ØªØ±Ú©ÛŒØ¨ Ù†Ø§Ù… + Ù†ÙˆØ¹ Ù…Ø¯Ø±Ø³Ù‡ + Ø´ÛŒÙØª Ø¨Ø§ÛŒØ¯ ÛŒÚ©ØªØ§ Ø¨Ø§Ø´Ø¯
  @@unique([name, schoolType, shift])
}

/// Ù¾Ø§ÛŒÙ‡ (Ø¯Ù‡Ù…ØŒ ÛŒØ§Ø²Ø¯Ù‡Ù…ØŒ Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù… ...)
model GradeLevel {
  id    Int    @id @default(autoincrement())
  name  String @unique // Ù…Ø«Ù„Ø§Ù‹ "10" ØŒ "11" ØŒ "12"
  order Int    @unique // ØªØ±ØªÛŒØ¨ Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªÙ‚Ø§ (Û±ØŒÛ²ØŒÛ³)

  classGroups ClassGroup[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  courses   Course[]
}

model Course {
  id Int @id @default(autoincrement())

  /// Ù†Ø§Ù… Ø¯Ø±Ø³ (Ù…Ø«Ù„Ø§Ù‹ "Ø±ÛŒØ§Ø¶ÛŒ Û±" ØŒ "Ú©Ø§Ø±Ú¯Ø§Ù‡ Ø¨Ø±Ù‚ ØµÙ†Ø¹ØªÛŒ Û±")
  name String

  /// Ú©Ø¯ Ø¯Ø±Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒØŒ Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´/Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ù‡Ø§)
  code String? @unique

  /// Ù†ÙˆØ¹ Ø¯Ø±Ø³ (ØªØ¦ÙˆØ±ÛŒ / Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ)
  type CourseType

  /// Ø±Ø´ØªÙ‡ Ù…Ø±ØªØ¨Ø· (Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÙˆØ³ Ø¹Ù…ÙˆÙ…ÛŒ)
  fieldOfStudyId Int?
  fieldOfStudy   FieldOfStudy? @relation(fields: [fieldOfStudyId], references: [id])

  /// Ù¾Ø§ÛŒÙ‡ Ù…Ø±ØªØ¨Ø· (Ù…Ø«Ù„Ø§Ù‹ Ø¯Ù‡Ù…ØŒ ÛŒØ§Ø²Ø¯Ù‡Ù…) - Ø§Ø®ØªÛŒØ§Ø±ÛŒ
  gradeLevelId Int?
  gradeLevel   GradeLevel? @relation(fields: [gradeLevelId], references: [id])

  /// ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø¯Ø±Ø³
  isActive Boolean @default(true)

  /// Ø§Ù†ØªØ³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø±Ø³ Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
  assignments CourseAssignment[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CourseAssignment {
  id Int @id @default(autoincrement())

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  /// Ú©Ù„Ø§Ø³ÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ø¯Ø±Ø³ Ø¯Ø± Ø¢Ù† Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
  classGroupId Int
  classGroup   ClassGroup @relation(fields: [classGroupId], references: [id])

  /// Ø®ÙˆØ¯ Ø¯Ø±Ø³
  courseId Int
  course   Course @relation(fields: [courseId], references: [id])

  /// Ù…Ø¹Ù„Ù… Ø§ØµÙ„ÛŒ (ÙÙ‚Ø· Ø§Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ùˆ Ù†Ù…Ø±Ù‡ Ø«Ø¨Øª Ú©Ù†Ø¯)
  mainTeacherId String
  mainTeacher   Teacher @relation("MainTeacherAssignments", fields: [mainTeacherId], references: [id])

  /// Ù…Ø¹Ù„Ù… Ú©Ù…Ú©ÛŒ (Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§ - Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  assistantTeacherId String?
  assistantTeacher   Teacher? @relation("AssistantTeacherAssignments", fields: [assistantTeacherId], references: [id])

  /// ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ø¹Øª Ù‡ÙØªÚ¯ÛŒ (ÙˆØ§Ø­Ø¯ Ø¯Ø± Ù‡ÙØªÙ‡)
  weeklyHours Int @default(1)

  theoryExams TheoryExam[]

  /// Ø§Ø³Ù„Ø§Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø§Ù†ØªØ³Ø§Ø¨
  scheduleSlots WeeklyScheduleSlot[]
  /// Ø¬Ù„Ø³Ø§Øª Ø¨Ø±Ú¯Ø²Ø§Ø±Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø§Ù†ØªØ³Ø§Ø¨
  sessions      CourseSession[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// Ø¯Ø± Ù‡Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒØŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ù„Ø§Ø³ ÙÙ‚Ø· ÛŒÚ© Assignment Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø³
  @@unique([academicYearId, classGroupId, courseId], name: "UniqueClassCoursePerYear")
}

model WeeklyScheduleSlot {
  id Int @id @default(autoincrement())

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ (Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ ÙÛŒÙ„ØªØ±)
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  /// Ú©Ù„Ø§Ø³
  classGroupId Int
  classGroup   ClassGroup @relation(fields: [classGroupId], references: [id])

  /// Ø§Ù†ØªØ³Ø§Ø¨ Ø¯Ø±Ø³-Ú©Ù„Ø§Ø³-Ù…Ø¹Ù„Ù…
  courseAssignmentId Int
  courseAssignment   CourseAssignment @relation(fields: [courseAssignmentId], references: [id])

  sessions CourseSession[]

  /// Ø±ÙˆØ² Ù‡ÙØªÙ‡
  weekday Weekday

  /// Ø¯Ù‚ÛŒÙ‚Ù‡ Ø´Ø±ÙˆØ¹ Ø§Ø² Ø§Ø¨ØªØ¯Ø§ÛŒ Ø±ÙˆØ² (Û° ØªØ§ Û±Û´Û³Û¹) - Ù…Ø«Ù„Ø§Ù‹ 8:00 = 480
  startMinuteOfDay Int

  /// Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø§Ø² Ø§Ø¨ØªØ¯Ø§ÛŒ Ø±ÙˆØ² (Ø¨ÛŒØ´ØªØ± Ø§Ø² startMinuteOfDay)
  endMinuteOfDay Int

  /// Ø¨Ø±Ú†Ø³Ø¨ Ú©Ù„Ø§Ø³/Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  roomLabel String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([academicYearId])
  @@index([classGroupId])
  @@index([courseAssignmentId])
}

model CourseSession {
  id Int @id @default(autoincrement())

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  /// Ú©Ù„Ø§Ø³
  classGroupId Int
  classGroup   ClassGroup @relation(fields: [classGroupId], references: [id])

  /// Ø§Ù†ØªØ³Ø§Ø¨ Ø¯Ø±Ø³-Ú©Ù„Ø§Ø³-Ù…Ø¹Ù„Ù…
  courseAssignmentId Int
  courseAssignment   CourseAssignment @relation(fields: [courseAssignmentId], references: [id])

  /// (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) Ø§Ø³Ù„Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒâ€ŒØ§ÛŒ Ú©Ù‡ Ø§ÛŒÙ† Ø¬Ù„Ø³Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¢Ù† Ø¨Ø±Ú¯Ø²Ø§Ø± Ø´Ø¯Ù‡
  plannedScheduleSlotId Int?
  plannedScheduleSlot   WeeklyScheduleSlot? @relation(fields: [plannedScheduleSlotId], references: [id])

  /// ØªØ§Ø±ÛŒØ®/Ø²Ù…Ø§Ù† Ø¬Ù„Ø³Ù‡ (Ù…ÛŒÙ„Ø§Ø¯ÛŒ - ÙØ±Ø§Ù†Øª Ø§Ø² Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯)
  date DateTime

  /// Ù…ÙˆØ¶ÙˆØ¹ Ø¬Ù„Ø³Ù‡ (Ù…Ø«Ù„Ø§Ù‹ "Ù…Ø¯Ø§Ø± Ø³Ø±ÛŒ Ùˆ Ù…ÙˆØ§Ø²ÛŒ" Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ú¯Ø§Ù‡)
  topic String?

  /// Ø¢ÛŒØ§ Ø¬Ù„Ø³Ù‡ Ù‚ÙÙ„ Ø´Ø¯Ù‡ Ø§Ø³Øª (Ø¨Ø¹Ø¯ Ø§Ø² Ù†Ù‡Ø§ÛŒÛŒâ€ŒØ´Ø¯Ù† Ø­Ø¶ÙˆØ± Ùˆ Ù†Ù…Ø±Ø§Øª)
  isLocked Boolean @default(false)

  /// Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ù‡Ù†Ø±Ø¬ÙˆÙ‡Ø§
  attendances StudentAttendance[]

  /// Ù†Ù…Ø±Ø§Øª Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ Ø§ÛŒÙ† Ø¬Ù„Ø³Ù‡
  workshopScores WorkshopScore[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([academicYearId])
  @@index([classGroupId])
  @@index([courseAssignmentId])
}

model StudentAttendance {
  id Int @id @default(autoincrement())

  sessionId Int
  session   CourseSession @relation(fields: [sessionId], references: [id])

  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  /// ÙˆØ¶Ø¹ÛŒØª Ø­Ø¶ÙˆØ± (Ø­Ø§Ø¶Ø±/ØºØ§ÛŒØ¨/ØºÛŒØ¨Øª Ù…ÙˆØ¬Ù‡)
  status AttendanceStatus

  /// Ø¢ÛŒØ§ Ø¨Ø§ ØªØ£Ø®ÛŒØ± Ø¢Ù…Ø¯Ù‡ØŸ
  isLate Boolean @default(false)

  /// ØªØ¹Ø¯Ø§Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ ØªØ£Ø®ÛŒØ± (Ø¨Ø±Ø§ÛŒ Ø­Ø§Ø¶Ø±Ù‡Ø§ÛŒ Ø¨Ø§ ØªØ£Ø®ÛŒØ±)
  lateMinutes Int @default(0)

  /// ØªÙˆØ¶ÛŒØ­ (Ù…Ø«Ù„Ø§Ù‹ Ø¹Ù„Øª ØºÛŒØ¨Øª/ØªØ£Ø®ÛŒØ±)
  note String?

  /// Ù…Ø¹Ù„Ù…ÛŒ Ú©Ù‡ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø±Ø§ Ø«Ø¨Øª/ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø±Ø¯Ù‡
  markedByTeacherId String
  markedByTeacher   Teacher @relation(fields: [markedByTeacherId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([sessionId, studentId])
  @@index([studentId])
}

model WorkshopScore {
  id Int @id @default(autoincrement())

  sessionId Int
  session   CourseSession @relation(fields: [sessionId], references: [id])

  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  /// Ù†Ù…Ø±Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ©Ø§Ø± (Û° ØªØ§ Û³Û°)
  reportScore Int

  /// Ù†Ù…Ø±Ù‡ Ø§Ù†Ø¶Ø¨Ø§Ø· (Û° ØªØ§ Û±Û°)
  disciplineScore Int

  /// Ù†Ù…Ø±Ù‡ Ø¯Ù‚Øª Ú©Ø§Ø± (Û° ØªØ§ Û±Û°)
  workPrecisionScore Int

  /// Ù†Ù…Ø±Ù‡ ØµØ­Øª Ù…Ø¯Ø§Ø± (Û° ØªØ§ Û²Ûµ)
  circuitCorrectnessScore Int

  /// Ù†Ù…Ø±Ù‡ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª (Û° ØªØ§ Û²Ûµ)
  questionsScore Int

  /// Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù…Ø±Ù‡ (Û° ØªØ§ Û±Û°Û°)
  totalScore Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([sessionId, studentId])
  @@index([studentId])
}

/// Ú©Ù„Ø§Ø³ (Ù…Ø«Ù„Ø§Ù‹ 101ØŒ 201ØŒ 301) Ø¯Ø± ÛŒÚ© Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ Ù…Ø´Ø®Øµ
model ClassGroup {
  id Int @id @default(autoincrement())

  /// Ú©Ø¯ Ú©Ù„Ø§Ø³ - Ù…Ø«Ù„Ø§Ù‹ "101" ØŒ "201" ØŒ "301"
  code String

  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  gradeLevelId Int
  gradeLevel   GradeLevel @relation(fields: [gradeLevelId], references: [id])

  fieldOfStudyId Int
  fieldOfStudy   FieldOfStudy @relation(fields: [fieldOfStudyId], references: [id])

  /// Ø¸Ø±ÙÛŒØª Ú©Ù„Ø§Ø³ (Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ø³Ø§ÛŒØª)
  capacity Int @default(30)

  /// Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø³Ø§Ù„ Ø¨Ø¹Ø¯ (Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªÙ‚Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±)
  nextClassGroupId Int?
  nextClassGroup   ClassGroup? @relation("ClassGroupNext", fields: [nextClassGroupId], references: [id])

  /// Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ú©Ù‡ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø§Ø±ØªÙ‚Ø§ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
  previousClassGroups ClassGroup[] @relation("ClassGroupNext")

  /// Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‡Ù†Ø±Ø¬ÙˆÙ‡Ø§ Ø¯Ø± Ø§ÛŒÙ† Ú©Ù„Ø§Ø³
  enrollments StudentEnrollment[]

  theoryExams TheoryExam[]

  /// Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ù†Ù‡Ø§ÛŒØª Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ ØªØ®ØµÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
  preRegistrations PreRegistration[]

  sessions CourseSession[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  courseAssignments   CourseAssignment[]
  weeklyScheduleSlots WeeklyScheduleSlot[]

  @@unique([academicYearId, code]) // ğŸ‘ˆ Ú©Ø¯ Ú©Ù„Ø§Ø³ Ø¯Ø± Ù‡Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ ÛŒÚ©ØªØ§
  @@index([academicYearId])
  @@index([gradeLevelId])
  @@index([fieldOfStudyId])
}

model TheoryExam {
  id Int @id @default(autoincrement())

  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  classGroupId Int
  classGroup   ClassGroup @relation(fields: [classGroupId], references: [id])

  courseAssignmentId Int
  courseAssignment   CourseAssignment @relation(fields: [courseAssignmentId], references: [id])

  term     ExamTerm
  method   ExamMethod
  category ExamCategory

  title       String?
  description String?

  /// Ø²Ù…Ø§Ù† Ø´Ø±ÙˆØ¹ Ø§Ù…ØªØ­Ø§Ù†
  startAt DateTime

  /// Ø²Ù…Ø§Ù† Ù¾Ø§ÛŒØ§Ù† Ø§Ù…ØªØ­Ø§Ù†
  endAt DateTime

  /// Ù†Ù…Ø±Ù‡â€ŒÛŒ Ú©Ø§Ù…Ù„ Ø§Ù…ØªØ­Ø§Ù† (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Û²Û° ÙˆÙ„ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…)
  maxScore Int @default(20)

  /// ÙˆØ²Ù† Ø§Ù…ØªØ­Ø§Ù† Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÛŒ Ù†Ù…Ø±Ù‡â€ŒÛŒ Ù†Ù‡Ø§ÛŒÛŒ (Û°.Û° ØªØ§ Û±.Û°)
  weight Float @default(1.0)

  /// Ø§Ú¯Ø± Ù…Ø¹Ù„Ù… Ø³Ø§Ø®ØªÙ‡ Ø¨Ø§Ø´Ø¯
  createdByTeacherId String?
  createdByTeacher   Teacher? @relation(fields: [createdByTeacherId], references: [id])

  /// Ø¨Ø¹Ø¯ Ø§Ø² Ù‚ÙÙ„ Ø´Ø¯Ù†ØŒ Ø¯ÛŒÚ¯Ø± Ù†Ù…Ø±Ø§Øª Ùˆ Ø¬Ø²Ø¦ÛŒØ§Øª Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ± Ù†ÛŒØ³Øª
  isLocked Boolean @default(false)

  results TheoryExamResult[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([academicYearId])
  @@index([classGroupId])
  @@index([courseAssignmentId])
  @@index([term])
}

model TheoryExamResult {
  id Int @id @default(autoincrement())

  theoryExamId Int
  theoryExam   TheoryExam @relation(fields: [theoryExamId], references: [id])

  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  /// Ù†Ù…Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† (Ù…Ø«Ù„Ø§Ù‹ Ø§Ø² Û²Û°ØŒ Ø¨Ø§ Ø§Ø¹Ø´Ø§Ø± ØªØ§ ÛŒÚ© Ø±Ù‚Ù…)
  score Decimal @db.Decimal(4, 1)
  note  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([theoryExamId, studentId])
  @@index([studentId])
}

/// Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ Ùˆ Ú©Ù„Ø§Ø³ Ù…Ø´Ø®Øµ
model StudentEnrollment {
  id Int @id @default(autoincrement())

  studentId String
  student   Student @relation(fields: [studentId], references: [id])

  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  classGroupId Int
  classGroup   ClassGroup @relation(fields: [classGroupId], references: [id])

  /// Ø¢ÛŒØ§ Ø§ÛŒÙ† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± ÙØ¹Ø§Ù„ Ø§Ø³ØªØŸ (Ø¨Ø±Ø§ÛŒ Ø¢Ù† Ø³Ø§Ù„)
  isActive Boolean @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// ÛŒÚ© Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø± Ù‡Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ ÙÙ‚Ø· ÛŒÚ© Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø§Ø±Ø¯
  @@unique([studentId, academicYearId])
  @@index([classGroupId])
}

// -----------------------------
// Pre-Registration (Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù‡Ù†Ø±Ø¬Ùˆ)
// -----------------------------

model PreRegistration {
  id String @id @default(uuid())

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒâ€ŒØ§ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ù† Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  /// ÙˆØ¶Ø¹ÛŒØª Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… (Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±ØŒ Ù¾Ø°ÛŒØ±ÙØªÙ‡ØŒ Ø±Ø¯ Ø´Ø¯Ù‡ØŒ Ø±Ø²Ø±Ùˆ)
  status PreRegistrationStatus @default(PENDING)

  /// Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ù‡Ù†Ø±Ø¬ÙˆÛŒ Ù†Ù‡Ø§ÛŒÛŒ (Ø¨Ø¹Ø¯ Ø§Ø² ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Student) â€“ Ø§Ø®ØªÛŒØ§Ø±ÛŒ
  studentId String?
  student   Student? @relation("StudentPreRegistrations", fields: [studentId], references: [id])

  /// Ø±Ø´ØªÙ‡/Ø´ÛŒÙØª Ø§Ù†ØªØ®Ø§Ø¨ÛŒ ØªÙˆØ³Ø· Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø± ÙØ±Ù… (Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ)
  requestedFieldOfStudyId Int?
  requestedFieldOfStudy   FieldOfStudy? @relation("RequestedFieldOfStudy", fields: [requestedFieldOfStudyId], references: [id])

  /// Ø±Ø´ØªÙ‡â€ŒØ§ÛŒ Ú©Ù‡ Ù†Ù‡Ø§ÛŒØªØ§Ù‹ ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± Ø¨Ø±Ø§ÛŒ Ù‡Ù†Ø±Ø¬Ùˆ Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡
  admittedFieldOfStudyId Int?
  admittedFieldOfStudy   FieldOfStudy? @relation("AdmittedFieldOfStudy", fields: [admittedFieldOfStudyId], references: [id])

  /// Ú©Ù„Ø§Ø³ÛŒ Ú©Ù‡ Ù‡Ù†Ø±Ø¬Ùˆ Ø¨Ø¹Ø¯ Ø§Ø² Ù¾Ø°ÛŒØ±Ø´ Ø¨Ù‡ Ø¢Ù† Ø§Ø®ØªØµØ§Øµ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
  assignedClassGroupId Int?
  assignedClassGroup   ClassGroup? @relation(fields: [assignedClassGroupId], references: [id])

  // --- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø§Ø®Ù„ ÙØ±Ù… Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… (snapshot) ---

  /// ğŸ‘‡ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ ÙˆØ¶Ø¹ÛŒØª
  contactPhone String

  /// Ù†Ø§Ù…
  firstName String

  /// Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
  lastName String

  /// Ú©Ø¯ Ù…Ù„ÛŒ
  nationalId String

  /// Ù†Ø§Ù… Ù¾Ø¯Ø±
  fatherName String

  /// Ø¨Ø§ Ú†Ù‡ Ú©Ø³ÛŒ Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
  livingSituation LivingSituation

  /// Ø³Ø±ÛŒØ§Ù„ Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡
  birthCertificateSeries String?

  /// ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯ (Ù…ÛŒÙ„Ø§Ø¯ÛŒ)
  birthDate DateTime

  /// Ø¢ÛŒØ§ Ú†Ù¾â€ŒØ¯Ø³Øª Ø§Ø³ØªØŸ
  isLeftHanded Boolean @default(false)

  /// Ù…Ø¹Ù„ÙˆÙ„ÛŒØª Ø¯Ø§Ø±Ø¯ØŸ
  hasDisability Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ù…Ø¹Ù„ÙˆÙ„ÛŒØª
  disabilityDescription String?

  /// Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ø®Ø§Øµ Ø¯Ø§Ø±Ø¯ØŸ
  hasChronicDisease Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ø¨ÛŒÙ…Ø§Ø±ÛŒ
  chronicDiseaseDescription String?

  /// Ø¯Ø§Ø±ÙˆÛŒ Ø®Ø§Øµ Ù…ØµØ±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
  hasSpecialMedication Boolean @default(false)

  /// ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø±ÙˆÛŒ Ø®Ø§Øµ
  specialMedicationDescription String?

  /// Ù…Ø¹Ø¯Ù„ Ø³Ø§Ù„ Ù‚Ø¨Ù„
  lastYearAverage Decimal? @db.Decimal(4, 2)

  /// Ù†Ù…Ø±Ù‡ Ø±ÛŒØ§Ø¶ÛŒ Ø³Ø§Ù„ Ù‚Ø¨Ù„
  lastYearMathScore Decimal? @db.Decimal(4, 2)

  /// Ù†Ù…Ø±Ù‡ Ø§Ù†Ø¶Ø¨Ø§Ø· Ø³Ø§Ù„ Ù‚Ø¨Ù„
  lastYearDisciplineScore Decimal? @db.Decimal(4, 2)

  /// Ù…Ù‚Ø·Ø¹ Ø³Ø§Ù„ Ù‚Ø¨Ù„ (Ù…Ø«Ù„Ø§Ù‹ "Ú©Ù„Ø§Ø³ Ù†Ù‡Ù…")
  lastYearEducationLevel String?

  /// Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolName String?

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolAddress String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø¯Ø±Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ
  previousSchoolPhone String?

  /// Ù…Ø³ÛŒØ± Ø¹Ú©Ø³ Û³xÛ´ Ø¢Ù¾Ù„ÙˆØ¯â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
  photoPath      String?
  photoUpdatedAt DateTime?

  /// Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†/Ø§ÙˆÙ„ÛŒØ§ Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…
  parents PreRegistrationParent[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// Ù‡Ø± Ù‡Ù†Ø±Ø¬Ùˆ (Ø¨Ø§ ÛŒÚ© Ú©Ø¯ Ù…Ù„ÛŒ) Ø¯Ø± Ù‡Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ ÙÙ‚Ø· ÛŒÚ© Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø§Ø±Ø¯
  @@unique([nationalId, academicYearId])
  @@index([academicYearId])
  @@index([requestedFieldOfStudyId])
  @@index([admittedFieldOfStudyId])
  @@index([assignedClassGroupId])
}

/// Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†/Ø§ÙˆÙ„ÛŒØ§ Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…
model PreRegistrationParent {
  id String @id @default(uuid())

  preRegistrationId String
  preRegistration   PreRegistration @relation(fields: [preRegistrationId], references: [id], onDelete: Cascade)

  /// Ù†Ø³Ø¨Øª (Ù¾Ø¯Ø±ØŒ Ù…Ø§Ø¯Ø±ØŒ Ø³Ø§ÛŒØ±)
  relation ParentRelationType

  /// Ù†Ø§Ù…
  firstName String

  /// Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
  lastName String

  /// Ú©Ø¯ Ù…Ù„ÛŒ (Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø§Ø´ØªÙ†)
  nationalId String?

  /// Ø´Ù…Ø§Ø±Ù‡ Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡
  birthCertificateNumber String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ù…ÙˆØ¨Ø§ÛŒÙ„)
  mobilePhone String?

  /// Ù…Ø¯Ø±Ú© ØªØ­ØµÛŒÙ„ÛŒ
  educationLevel EducationLevel?

  /// Ø´ØºÙ„
  jobTitle String?

  /// Ù…Ø­Ù„ ØªÙˆÙ„Ø¯
  birthPlace String?

  /// Ù…Ø­Ù„ ØµØ¯ÙˆØ± Ø´Ù†Ø§Ø³Ù†Ø§Ù…Ù‡
  idCardIssuePlace String?

  /// Ø¯Ø± Ù‚ÛŒØ¯ Ø­ÛŒØ§Øª Ø§Ø³ØªØŸ
  isAlive Boolean @default(true)

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ø³Ú©ÙˆÙ†Øª
  homeAddress String?

  /// Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„ Ú©Ø§Ø±
  workAddress String?

  /// Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ Ù…Ø­Ù„ Ú©Ø§Ø±
  workPhone String?

  /// ÙˆØ¶Ø¹ÛŒØª Ø§ÛŒØ«Ø§Ø±Ú¯Ø±ÛŒ / Ø­Ø¶ÙˆØ± Ø¯Ø± Ø¬Ù†Ú¯
  hasWarParticipation Boolean @default(false)

  /// Ø¯Ø±ØµØ¯ Ø¬Ø§Ù†Ø¨Ø§Ø²ÛŒ
  veteranPercent Int?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([preRegistrationId])
}

model TeacherLeaveRequest {
  id Int @id @default(autoincrement())

  /// Ù…Ø¹Ù„Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒØ¯Ù‡Ù†Ø¯Ù‡
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id])

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒØŒ ÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ø®ÛŒÙ„ÛŒ Ù…ÙÛŒØ¯Ù‡)
  academicYearId Int?
  academicYear   AcademicYear? @relation(fields: [academicYearId], references: [id])

  /// Ù†ÙˆØ¹ Ù…Ø±Ø®ØµÛŒ (Ø§Ø³ØªØ¹Ù„Ø§Ø¬ÛŒØŒ Ø´Ø®ØµÛŒØŒ ...)
  type LeaveType?

  /// ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª Ø´Ø±ÙˆØ¹ Ù…Ø±Ø®ØµÛŒ
  startDate DateTime

  /// ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª Ù¾Ø§ÛŒØ§Ù† Ù…Ø±Ø®ØµÛŒ
  endDate DateTime

  /// Ø¢ÛŒØ§ Ú©Ù„ Ø±ÙˆØ² Ø§Ø³ØªØŸ (Ø§Ú¯Ø± false Ø¨Ø§Ø´Ø¯ØŒ ÛŒØ¹Ù†ÛŒ Ø¨Ø®Ø´ÛŒ Ø§Ø² Ø±ÙˆØ² / Ú†Ù†Ø¯ Ø³Ø§Ø¹Øª)
  isFullDay Boolean @default(true)

  /// ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø¹Ù„Ù… Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¹Ù„Øª Ù…Ø±Ø®ØµÛŒ
  reason String?

  /// ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª
  status LeaveStatus @default(PENDING)

  /// Ú©Ø§Ø±Ø¨Ø±ÛŒ Ú©Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªØµÙ…ÛŒÙ… Ø±Ø§ Ø«Ø¨Øª Ú©Ø±Ø¯Ù‡ (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ù…Ø¯ÛŒØ± ÛŒØ§ Ù…Ø¹Ø§ÙˆÙ†)
  decidedByUserId String?
  decidedByUser   User?   @relation("LeaveDecidedBy", fields: [decidedByUserId], references: [id])

  /// ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ (ØªØ£ÛŒÛŒØ¯/Ø±Ø¯)
  decidedAt DateTime?

  /// ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø¯ÛŒØ±/Ù…Ø¹Ø§ÙˆÙ† (Ø¹Ù„Øª ØªØ£ÛŒÛŒØ¯/Ø±Ø¯)
  decisionNote String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([teacherId])
  @@index([academicYearId])
  @@index([status])
}

model PreRegistrationWindow {
  id Int @id @default(autoincrement())

  /// Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ Ù‡Ø¯Ù (Ù…Ø«Ù„Ø§Ù‹ 1404-1405)
  academicYearId Int
  academicYear   AcademicYear @relation(fields: [academicYearId], references: [id])

  /// ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ Ø´Ø¯Ù† ÙØ±Ù… Ù¾ÛŒØ´â€ŒØ«Ø¨Øªâ€ŒÙ†Ø§Ù…
  startAt DateTime

  /// ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª Ù¾Ø§ÛŒØ§Ù†
  endAt DateTime

  /// Ø¢ÛŒØ§ Ø§ÛŒÙ† Ù¾Ù†Ø¬Ø±Ù‡ Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± ÙØ¹Ø§Ù„ Ø§Ø³ØªØŸ (Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ø¯Ø³ØªÛŒ Ø¯Ø± ØµÙˆØ±Øª Ù„Ø²ÙˆÙ…)
  isActive Boolean @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  /// Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ Ù†Ù‡Ø§ÛŒØªØ§Ù‹ ÛŒÚ© Ù¾Ù†Ø¬Ø±Ù‡ ÙØ¹Ø§Ù„ Ù…Ù†Ø·Ù‚ÛŒ Ø§Ø³Øª
  @@unique([academicYearId])
  @@index([startAt, endAt])
}

model NewsPost {
  id Int @id @default(autoincrement())

  /// Ø¹Ù†ÙˆØ§Ù† Ø®Ø¨Ø±
  title String

  /// slug Ø¨Ø±Ø§ÛŒ URL (Ù…Ø«Ù„Ø§Ù‹ "start-of-new-year")
  slug String @unique

  /// Ø®Ù„Ø§ØµÙ‡ Ú©ÙˆØªØ§Ù‡ (Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øª Ø®Ø¨Ø±Ù‡Ø§)
  summary String?

  /// Ù…ØªÙ† Ú©Ø§Ù…Ù„ Ø®Ø¨Ø± (Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ HTML/Markdown/text Ø³Ø§Ø¯Ù‡ Ø¨Ø§Ø´Ù‡)
  content String

  /// Ø³Ø·Ø­ Ù†Ù…Ø§ÛŒØ´ (Ø¹Ù…ÙˆÙ…ÛŒØŒ ÙÙ‚Ø· Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†ØŒ ...)
  visibility NewsVisibility @default(PUBLIC)

  /// Ø¢ÛŒØ§ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ØŸ
  isPublished Boolean @default(false)

  /// Ø§Ø² Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  publishAt DateTime?

  /// ØªØ§ Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ â€“ Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ ØªØ§Ø±ÛŒØ® Ù…ØµØ±Ù Ø¯Ø§Ø±Ù†Ø¯)
  expireAt DateTime?

  /// Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù†Ù‚Ø´ ADMIN ÛŒØ§ TEACHER)
  authorUserId String?
  authorUser   User?   @relation(fields: [authorUserId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([isPublished, visibility, publishAt])
}

model PublicPageSection {
  id Int @id @default(autoincrement())

  /// Ú©Ù„ÛŒØ¯ ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ (Ù…Ø«Ù„Ø§Ù‹ "hero", "about", "labs", "contact")
  sectionKey String @unique

  /// Ø¹Ù†ÙˆØ§Ù† Ø¨Ø®Ø´
  title String

  /// Ù…ØªÙ†/Ù…Ø­ØªÙˆØ§ (Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ HTML/Markdown/JSON Ø¨Ø§Ø´Ø¯)
  content String

  /// ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´ (Ú©ÙˆÚ†Ú©â€ŒØªØ± = Ø¨Ø§Ù„Ø§ØªØ±)
  displayOrder Int @default(0)

  /// ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø§ÛŒÙ† Ø¨Ø®Ø´
  isActive Boolean @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
